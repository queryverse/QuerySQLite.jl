<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>QuerySQLite · QuerySQLite.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">QuerySQLite.jl</span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>QuerySQLite</a><ul class="internal"><li><a class="tocitem" href="#User-documentation"><span>User documentation</span></a></li><li><a class="tocitem" href="#Developer-documentation"><span>Developer documentation</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>QuerySQLite</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>QuerySQLite</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/queryverse/QuerySQLite.jl/blob/master/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="QuerySQLite"><a class="docs-heading-anchor" href="#QuerySQLite">QuerySQLite</a><a id="QuerySQLite-1"></a><a class="docs-heading-anchor-permalink" href="#QuerySQLite" title="Permalink"></a></h1><ul><li><a href="#QuerySQLite.BySQL"><code>QuerySQLite.BySQL</code></a></li><li><a href="#QuerySQLite.Database-Tuple{AbstractString}"><code>QuerySQLite.Database</code></a></li><li><a href="#QuerySQLite.Database"><code>QuerySQLite.Database</code></a></li><li><a href="#QuerySQLite.char-Tuple"><code>QuerySQLite.char</code></a></li><li><a href="#QuerySQLite.get_column_names-Tuple{SQLite.DB,Any}"><code>QuerySQLite.get_column_names</code></a></li><li><a href="#QuerySQLite.get_sql-Tuple{Any}"><code>QuerySQLite.get_sql</code></a></li><li><a href="#QuerySQLite.get_table_names-Tuple{SQLite.DB}"><code>QuerySQLite.get_table_names</code></a></li><li><a href="#QuerySQLite.hex-Tuple{Number}"><code>QuerySQLite.hex</code></a></li><li><a href="#QuerySQLite.if_else-Tuple{Any,Any,Any}"><code>QuerySQLite.if_else</code></a></li><li><a href="#QuerySQLite.instr-Tuple{Any,Any}"><code>QuerySQLite.instr</code></a></li><li><a href="#QuerySQLite.type_of-Tuple{Any}"><code>QuerySQLite.type_of</code></a></li></ul><h2 id="User-documentation"><a class="docs-heading-anchor" href="#User-documentation">User documentation</a><a id="User-documentation-1"></a><a class="docs-heading-anchor-permalink" href="#User-documentation" title="Permalink"></a></h2><p>QuerySQLite is an experimental package sponsored by Google Summer of Code. It&#39;s finally ready for public use. Although QuerySQLite is only tested using SQLite, it&#39;s been purposefully designed to easily incorporate other database software.</p><p>Use <a href="#QuerySQLite.Database"><code>Database</code></a> to wrap an external database. Then, you can access its tables using <code>.</code>, and conduct most <code>Query</code> operations on them. In theory, most operations should &quot;just work&quot;. There are a couple of exceptions.</p><h3 id="Non-overloadable-syntax-and-functions"><a class="docs-heading-anchor" href="#Non-overloadable-syntax-and-functions">Non-overloadable syntax and functions</a><a id="Non-overloadable-syntax-and-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Non-overloadable-syntax-and-functions" title="Permalink"></a></h3><p>Patterns like <code>if</code> and functions like <code>ifelse</code> and <code>typeof</code> can&#39;t be overloaded. Instead, QuerySQLite exports the <a href="#QuerySQLite.if_else-Tuple{Any,Any,Any}"><code>if_else</code></a> and <a href="#QuerySQLite.type_of-Tuple{Any}"><code>type_of</code></a> functions and overloads them instead.</p><h3 id="No-SQL-arguments"><a class="docs-heading-anchor" href="#No-SQL-arguments">No SQL arguments</a><a id="No-SQL-arguments-1"></a><a class="docs-heading-anchor-permalink" href="#No-SQL-arguments" title="Permalink"></a></h3><p>If you would like to translate code to SQL, but you do not pass any SQL arguments, you will need to use <a href="#QuerySQLite.BySQL"><code>BySQL</code></a> to pass a dummy SQL object instead. See the <code>BySQL</code> docstring for more information.</p><h3 id="Pattern-matching"><a class="docs-heading-anchor" href="#Pattern-matching">Pattern matching</a><a id="Pattern-matching-1"></a><a class="docs-heading-anchor-permalink" href="#Pattern-matching" title="Permalink"></a></h3><p>Use SQLite syntax, not Julia syntax, for pattern matching for regular expressions and date formats.</p><h2 id="Developer-documentation"><a class="docs-heading-anchor" href="#Developer-documentation">Developer documentation</a><a id="Developer-documentation-1"></a><a class="docs-heading-anchor-permalink" href="#Developer-documentation" title="Permalink"></a></h2><p>QuerySQLite hijacks Julia&#39;s multiple dispatch to translate external database commands to SQL instead of evaluating them. To do this, it constructs a &quot;model_row&quot; that represents the structure of a row of data. If you would like to add support for a new function, there are only a few steps:</p><ul><li>Use the <code>@code_instead</code> macro to specify the argument types for diversion into SQL translation.</li><li>If your function will modify the row structure of the table, define a <code>model_row_call</code> method.</li><li>Use the <code>@translate_default</code> macro to name the matching SQL function. If more involved processing is required, define a <code>translate_call</code> method instead.</li><li>If you would like to show your SQL expression in a non-standard way, edit the <code>show</code> method for <code>SQLExpression</code>s.</li></ul><article class="docstring"><header><a class="docstring-binding" id="QuerySQLite.BySQL" href="#QuerySQLite.BySQL"><code>QuerySQLite.BySQL</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">struct BySQL{Source}</code></pre><p>If you would like a statement to be evaluated by SQL, not Julia, and none of the arguments are SQL code, you can use BySQL to hack dispatch.</p><pre><code class="language-julia-repl">julia&gt; using QuerySQLite

julia&gt; using Query: @map

julia&gt; using DataValues: DataValue

julia&gt; database = Database(joinpath(pathof(QuerySQLite) |&gt; dirname |&gt; dirname, &quot;test&quot;, &quot;Chinook_Sqlite.sqlite&quot;));

julia&gt; result = database.Track |&gt; @map({a = rand(BySQL(_), Int)});

julia&gt; collect(result)[1].a isa DataValue{Int}
true</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/queryverse/QuerySQLite.jl/blob/8bcd16272bc31ed72e0362a154a7165f8786cbeb/src/code_instead.jl#L7-L27">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="QuerySQLite.Database" href="#QuerySQLite.Database"><code>QuerySQLite.Database</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">struct Database{Source}</code></pre><p>A wrapper for an external database. <code>source</code> need only support <a href="#QuerySQLite.get_table_names-Tuple{SQLite.DB}"><code>get_table_names</code></a> and <a href="#QuerySQLite.get_column_names-Tuple{SQLite.DB,Any}"><code>get_column_names</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/queryverse/QuerySQLite.jl/blob/8bcd16272bc31ed72e0362a154a7165f8786cbeb/src/database.jl#L39-L44">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="QuerySQLite.Database-Tuple{AbstractString}" href="#QuerySQLite.Database-Tuple{AbstractString}"><code>QuerySQLite.Database</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">Database(filename::AbstractString)</code></pre><p>Guess the database software from the filename.</p><pre><code class="language-julia-repl">julia&gt; using QuerySQLite

julia&gt; database = Database(joinpath(pathof(QuerySQLite) |&gt; dirname |&gt; dirname, &quot;test&quot;, &quot;Chinook_Sqlite.sqlite&quot;));

julia&gt; database.Track
?x9 SQLite query result
TrackId │ Name                                      │ AlbumId │ MediaTypeId
────────┼───────────────────────────────────────────┼─────────┼────────────
1       │ &quot;For Those About To Rock (We Salute You)&quot; │ 1       │ 1
2       │ &quot;Balls to the Wall&quot;                       │ 2       │ 2
3       │ &quot;Fast As a Shark&quot;                         │ 3       │ 2
4       │ &quot;Restless and Wild&quot;                       │ 3       │ 2
5       │ &quot;Princess of the Dawn&quot;                    │ 3       │ 2
6       │ &quot;Put The Finger On You&quot;                   │ 1       │ 1
7       │ &quot;Let&#39;s Get It Up&quot;                         │ 1       │ 1
8       │ &quot;Inject The Venom&quot;                        │ 1       │ 1
9       │ &quot;Snowballed&quot;                              │ 1       │ 1
10      │ &quot;Evil Walks&quot;                              │ 1       │ 1
... with more rows, and 5 more columns: GenreId, Composer, Milliseconds, Bytes, UnitPrice</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/queryverse/QuerySQLite.jl/blob/8bcd16272bc31ed72e0362a154a7165f8786cbeb/src/database.jl#L49-L76">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="QuerySQLite.char-Tuple" href="#QuerySQLite.char-Tuple"><code>QuerySQLite.char</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">char(numbers...)</code></pre><p>Convert a list of numbers to a string with the corresponding characters</p><pre><code class="language-julia-repl">julia&gt; using QuerySQLite

julia&gt; char(65, 90)
&quot;AZ&quot;</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/queryverse/QuerySQLite.jl/blob/8bcd16272bc31ed72e0362a154a7165f8786cbeb/src/functions.jl#L1-L12">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="QuerySQLite.get_column_names-Tuple{SQLite.DB,Any}" href="#QuerySQLite.get_column_names-Tuple{SQLite.DB,Any}"><code>QuerySQLite.get_column_names</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">get_column_names(source, table_name)::Tuple{Symbol}</code></pre><p>Get the names of the columns in <code>table_name</code> in <code>source</code>.</p><pre><code class="language-julia-repl">julia&gt; using QuerySQLite

julia&gt; database = Database(joinpath(pathof(QuerySQLite) |&gt; dirname |&gt; dirname, &quot;test&quot;, &quot;Chinook_Sqlite.sqlite&quot;));

julia&gt; get_column_names(getfield(database, :source), :Album)
(:AlbumId, :Title, :ArtistId)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/queryverse/QuerySQLite.jl/blob/8bcd16272bc31ed72e0362a154a7165f8786cbeb/src/database.jl#L20-L33">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="QuerySQLite.get_sql-Tuple{Any}" href="#QuerySQLite.get_sql-Tuple{Any}"><code>QuerySQLite.get_sql</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">get_sql(it)</code></pre><p>Use <code>get_sql</code> if you would like to see the SQL code generated by an SQLite query.</p><pre><code class="language-julia-repl">julia&gt; using QuerySQLite

julia&gt; database = Database(joinpath(pathof(QuerySQLite) |&gt; dirname |&gt; dirname, &quot;test&quot;, &quot;Chinook_Sqlite.sqlite&quot;));

julia&gt; get_sql(database.Track)
SELECT * FROM (Track)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/queryverse/QuerySQLite.jl/blob/8bcd16272bc31ed72e0362a154a7165f8786cbeb/src/show.jl#L175-L189">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="QuerySQLite.get_table_names-Tuple{SQLite.DB}" href="#QuerySQLite.get_table_names-Tuple{SQLite.DB}"><code>QuerySQLite.get_table_names</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">get_table_names(source)::Tuple{Symbol}</code></pre><p>Get the names of the tables in <code>source</code>.</p><pre><code class="language-julia-repl">julia&gt; using QuerySQLite

julia&gt; database = Database(joinpath(pathof(QuerySQLite) |&gt; dirname |&gt; dirname, &quot;test&quot;, &quot;Chinook_Sqlite.sqlite&quot;));

julia&gt; get_table_names(getfield(database, :source))
(:Album, :Artist, :Customer, :Employee, :Genre, :Invoice, :InvoiceLine, :MediaType, :Playlist, :PlaylistTrack, :Track)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/queryverse/QuerySQLite.jl/blob/8bcd16272bc31ed72e0362a154a7165f8786cbeb/src/database.jl#L1-L14">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="QuerySQLite.hex-Tuple{Number}" href="#QuerySQLite.hex-Tuple{Number}"><code>QuerySQLite.hex</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">hex(it)</code></pre><p>Uppercase hexadecimal representation</p><pre><code class="language-julia-repl">julia&gt; using QuerySQLite

julia&gt; hex(&quot;hello&quot;)
&quot;68656C6C6F&quot;</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/queryverse/QuerySQLite.jl/blob/8bcd16272bc31ed72e0362a154a7165f8786cbeb/src/functions.jl#L70-L81">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="QuerySQLite.if_else-Tuple{Any,Any,Any}" href="#QuerySQLite.if_else-Tuple{Any,Any,Any}"><code>QuerySQLite.if_else</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">if_else(switch, yes, no)</code></pre><p><code>ifelse</code> that you can add methods to.</p><pre><code class="language-julia-repl">julia&gt; using QuerySQLite

julia&gt; if_else(true, 1, 0)
1

julia&gt; if_else(false, 1, 0)
0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/queryverse/QuerySQLite.jl/blob/8bcd16272bc31ed72e0362a154a7165f8786cbeb/src/functions.jl#L16-L30">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="QuerySQLite.instr-Tuple{Any,Any}" href="#QuerySQLite.instr-Tuple{Any,Any}"><code>QuerySQLite.instr</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">instr(haystack, needle)</code></pre><p>Find the first index of <code>needle</code> in <code>haystack</code>.</p><pre><code class="language-julia-repl">julia&gt; using QuerySQLite

julia&gt; instr(&quot;QuerySQLite&quot;, &quot;SQL&quot;)
6</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/queryverse/QuerySQLite.jl/blob/8bcd16272bc31ed72e0362a154a7165f8786cbeb/src/functions.jl#L36-L47">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="QuerySQLite.type_of-Tuple{Any}" href="#QuerySQLite.type_of-Tuple{Any}"><code>QuerySQLite.type_of</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">type_of(it)</code></pre><p><code>typeof</code> that you can add methods to.</p><pre><code class="language-julia-repl">julia&gt; using QuerySQLite

julia&gt; type_of(&#39;a&#39;)
Char</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/queryverse/QuerySQLite.jl/blob/8bcd16272bc31ed72e0362a154a7165f8786cbeb/src/functions.jl#L53-L64">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Sunday 13 September 2020 03:29">Sunday 13 September 2020</span>. Using Julia version 1.5.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
